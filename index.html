<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <button id="refresh">Refresh</button>
    <button id="checkMail">Check Mail</button>
    <div id="newTweets"></div>
    <div id="twittlerBoard"></div>
    <script>

      $(document).ready(function(){
        var $body = $('#twittlerBoard');
        $body.html('');

        var tweetTally; //used to store the number of displayed tweets

        var refresh = function(){
          var index = streams.home.length - 1;
          tweetTally = index;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $tweet.appendTo($body);
            index -= 1;
          } 
        };

        $("#refresh").on('click',refresh);

        var tweetChecker = function(){
          var totalTweets = streams.home.length - 1;
          var newTweets = totalTweets - tweetTally;
          $("#newTweets").text(newTweets + " new tweets!");
        };

        $("#checkMail").on('click', tweetChecker);


        refresh();

      });

    </script>
  </body>
</html>
